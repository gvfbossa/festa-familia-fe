<section class="cadastro">
  <h2 class="cadastro__title">üìã Cadastro de Participante</h2>

  <form class="cadastro__form" #form="ngForm" (ngSubmit)="onSubmit(form)">
    <!-- BLOCO LOGIN -->
    <div class="cadastro__block">
      <h3 class="cadastro__block-title">Login</h3>

      <!-- Email -->
      <div class="cadastro__form-group">
        <label for="email">E-mail *</label>
        <input id="email" name="email" type="email" ngModel required />
        <div
          class="cadastro__error"
          *ngIf="form.submitted && !form.controls['email']?.valid"
        >
          E-mail √© obrigat√≥rio e deve ser v√°lido
        </div>
      </div>

      <!-- Senha -->
      <div class="cadastro__form-group">
        <label for="senha">Senha *</label>
        <input
          id="senha"
          name="senha"
          type="password"
          ngModel
          required
          minlength="6"
        />
        <div
          class="cadastro__error"
          *ngIf="form.submitted && !form.controls['senha']?.valid"
        >
          Senha obrigat√≥ria (m√≠nimo 6 caracteres)
        </div>
      </div>

      <!-- Confirmar Senha -->
      <div class="cadastro__form-group">
        <label for="confirmaSenha">Confirmar Senha *</label>
        <input
          id="confirmaSenha"
          name="confirmaSenha"
          type="password"
          ngModel
          required
        />
        <div
          class="cadastro__error"
          *ngIf="
            form.submitted && form.value.senha !== form.value.confirmaSenha
          "
        >
          Senhas n√£o conferem
        </div>
      </div>
    </div>

    <!-- BLOCO INFORMA√á√ïES PESSOAIS -->
    <div class="cadastro__block">
      <h3 class="cadastro__block-title">Informa√ß√µes Pessoais</h3>

      <!-- Nome Completo -->
      <div class="cadastro__form-group">
        <label for="nome">Nome Completo *</label>
        <input id="nome" name="nome" type="text" ngModel required />
        <div
          class="cadastro__error"
          *ngIf="form.submitted && !form.controls['nome']?.valid"
        >
          Nome √© obrigat√≥rio
        </div>
      </div>

      <!-- Filia√ß√£o -->
      <div class="cadastro__form-group">
        <label for="nomePai">Nome do Pai *</label>
        <input id="nomePai" name="nomePai" type="text" ngModel required />
        <div
          class="cadastro__error"
          *ngIf="form.submitted && !form.controls['nomePai']?.valid"
        >
          Nome do pai √© obrigat√≥rio
        </div>
      </div>

      <div class="cadastro__form-group">
        <label for="nomeMae">Nome da M√£e *</label>
        <input id="nomeMae" name="nomeMae" type="text" ngModel required />
        <div
          class="cadastro__error"
          *ngIf="form.submitted && !form.controls['nomeMae']?.valid"
        >
          Nome da m√£e √© obrigat√≥rio
        </div>
      </div>

      <!-- Apelido -->
      <div class="cadastro__form-group">
        <label for="apelido">Apelido</label>
        <input id="apelido" name="apelido" type="text" ngModel />
      </div>

      <!-- Data de Nascimento -->
      <div class="cadastro__form-group">
        <label for="dataNascimento">Data de Nascimento *</label>
        <input
          id="dataNascimento"
          name="dataNascimento"
          type="date"
          ngModel
          required
        />
        <div
          class="cadastro__error"
          *ngIf="form.submitted && !form.controls['dataNascimento']?.valid"
        >
          Data de nascimento √© obrigat√≥ria
        </div>
      </div>

      <!-- Local de Nascimento -->
      <div class="cadastro__form-group">
        <label for="localNascimento">Local de Nascimento * <span class="cadastro__aditional-info">(Selecionar Estado e Cidade)</span></label>
        <div
          class="cadastro__error"
          *ngIf="form.submitted && !form.controls['localNascimento']?.valid">
          Local de nascimento √© obrigat√≥rio
        </div>

        <!-- Estado e Cidade -->
        <div class="cadastro__local-selects">
          <select
            id="estado"
            name="estado"
            [(ngModel)]="estadoSelecionadoId"
            (change)="onEstadoChange()"
            required
          >
            <option value="" disabled selected>Selecione o estado</option>
            <option *ngFor="let e of estados" [value]="e.id">
              {{ e.nome }} ({{ e.sigla }})
            </option>
          </select>

          <select id="municipio" name="municipio" ngModel required>
            <option value="" disabled selected>Selecione a cidade</option>
            <option *ngFor="let m of municipios" [value]="m.nome">
              {{ m.nome }}
            </option>
          </select>
        </div>
      </div>

      <!-- Contato -->
      <div class="cadastro__form-group">
        <label for="contato">Contato *</label>
        <input id="contato" name="contato" type="text" ngModel required />
        <div
          class="cadastro__error"
          *ngIf="form.submitted && !form.controls['contato']?.valid"
        >
          Contato √© obrigat√≥rio
        </div>
      </div>
    </div>

    <button type="submit" class="cadastro__submit">Cadastrar</button>
  </form>
</section>
