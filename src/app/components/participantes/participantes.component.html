<section class="participants">
  <h3><strong>InstruÃ§Ãµes:</strong></h3>
  <p class="participants__instructions">
    Para <strong>ALTERAR</strong> as informaÃ§Ãµes de um participante, basta preencher os dados e clicar no botÃ£o <span style="color: green; font-weight: bold;">verde </span><strong>Salvar</strong><br><br>
    Para <strong style="color: red;">EXCLUIR</strong> um participante, basta clicar no botÃ£o <span style="color: red; font-weight: bold;">X</span> ao lado das informaÃ§Ãµes.<br><br>
    Para <strong>INCLUIR</strong> um novo participante, clicar no botÃ£o <strong style="color: green; font-weight: bold;">Adicionar Adulto/CrianÃ§a</strong> em baixo das listas.<br><br>
    HÃ¡ tambÃ©m uma caixa de <strong>PESQUISA</strong> onde vocÃª pode buscar um participante na lista.
  </p>
  <div class="participants__container">
    <!-- ===== ADULTOS ===== -->
    <h2 class="participants__title participants__title--adultos">Adultos</h2>
    <input
      type="text"
      [(ngModel)]="searchAdult"
      placeholder="Buscar adulto..."
      class="participants__search"
    />

    <!-- TABELA DESKTOP -->
    <div class="participants__table-wrapper">
      <table class="participants__table">
        <thead>
          <tr>
            <th>Nome</th>
            <th>Pai</th>
            <th>MÃ£e</th>
            <th>Nonno</th>
            <th>Nonna</th>
            <th>Local de Nascimento</th>
            <th>Data de Nascimento</th>
            <th>Bandeira</th>
            <th>AÃ§Ãµes</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let p of filteredAdults">
            <td><input [(ngModel)]="p.nomeCompleto" placeholder="Nome" /></td>
            <td><input [(ngModel)]="p.nomePai" placeholder="Pai" /></td>
            <td><input [(ngModel)]="p.nomeMae" placeholder="MÃ£e" /></td>
            <td><input [(ngModel)]="p.nomeNonno" placeholder="Nonno" /></td>
            <td><input [(ngModel)]="p.nomeNonna" placeholder="Nonna" /></td>
            <td><input [(ngModel)]="p.localNascimento" placeholder="Local de Nascimento" /></td>
            <td><input type="date" [(ngModel)]="p.dataNascimento" placeholder="Data de Nascimento" /></td>
            <td class="participants__bandeira">
              <label><input type="radio" name="bandeira-{{ p.id }}" [(ngModel)]="p.bandeira" value="ITALIA" /> ğŸ‡®ğŸ‡¹</label>
              <label><input type="radio" name="bandeira-{{ p.id }}" [(ngModel)]="p.bandeira" value="POLONIA" /> ğŸ‡µğŸ‡±</label>
            </td>
            <td class="participants__actions">
              <button class="participants__save" (click)="editAdult(p)">ğŸ’¾ Salvar</button>
              <button class="participants__remove" (click)="removeAdult(p.id)">âŒ</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <button class="participants__add" (click)="addAdult()">â• Adicionar Adulto</button>

    <!-- ===== ADULTOS MOBILE (Accordion) ===== -->
    <div class="participants__mobile-wrapper">
      <div class="participants__mobile" *ngFor="let p of filteredAdults">
        <div class="participant-row" (click)="p.expanded = !p.expanded">
          <span class="participant-name">{{ p.nomeCompleto || 'Nome nÃ£o preenchido' }}</span>
          <button class="participants__remove" (click)="removeAdult(p.id); $event.stopPropagation()">âŒ</button>
        </div>

        <div class="participant-body" *ngIf="p.expanded">
          <div class="participant-field"><label>Nome</label><input [(ngModel)]="p.nomeCompleto" /></div>
          <div class="participant-field"><label>Pai</label><input [(ngModel)]="p.nomePai" /></div>
          <div class="participant-field"><label>MÃ£e</label><input [(ngModel)]="p.nomeMae" /></div>
          <div class="participant-field"><label>Nonno</label><input [(ngModel)]="p.nomeNonno" /></div>
          <div class="participant-field"><label>Nonna</label><input [(ngModel)]="p.nomeNonna" /></div>
          <div class="participant-field"><label>Local de Nascimento</label><input [(ngModel)]="p.localNascimento" /></div>
          <div class="participant-field"><label>Data de Nascimento</label><input type="date" [(ngModel)]="p.dataNascimento" /></div>
          <div class="participant-field participant-bandeira">
            <label>Bandeira</label>
            <label><input type="radio" name="bandeira-{{p.id}}" [(ngModel)]="p.bandeira" value="ITALIA" /> ğŸ‡®ğŸ‡¹</label>
            <label><input type="radio" name="bandeira-{{p.id}}" [(ngModel)]="p.bandeira" value="POLONIA" /> ğŸ‡µğŸ‡±</label>
          </div>
          <button class="participants__save" (click)="editAdult(p); p.expanded=false">ğŸ’¾ Salvar</button>
        </div>
      </div>
    </div>

    <!-- ===== CRIANÃ‡AS ===== -->
    <h2 class="participants__title participants__title--criancas">CrianÃ§as</h2>
    <input
      type="text"
      [(ngModel)]="searchKid"
      placeholder="Buscar crianÃ§a..."
      class="participants__search"
    />

    <!-- TABELA DESKTOP -->
    <div class="participants__table-wrapper">
      <table class="participants__table">
        <thead>
          <tr>
            <th>Nome</th>
            <th>Pai</th>
            <th>MÃ£e</th>
            <th>Local de Nascimento</th>
            <th>Data de Nascimento</th>
            <th>Bandeira</th>
            <th>AÃ§Ãµes</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let c of filteredKids">
            <td><input [(ngModel)]="c.nomeCompleto" placeholder="Nome" /></td>
            <td><input [(ngModel)]="c.nomePai" placeholder="Pai" /></td>
            <td><input [(ngModel)]="c.nomeMae" placeholder="MÃ£e" /></td>
            <td><input [(ngModel)]="c.localNascimento" placeholder="Local de Nascimento" /></td>
            <td><input type="date" [(ngModel)]="c.dataNascimento" placeholder="Data de Nascimento" /></td>
            <td class="participants__bandeira">
              <label><input type="radio" name="bandeira-kid-{{ c.id }}" [(ngModel)]="c.bandeira" value="ITALIA" /> ğŸ‡®ğŸ‡¹</label>
              <label><input type="radio" name="bandeira-kid-{{ c.id }}" [(ngModel)]="c.bandeira" value="POLONIA" /> ğŸ‡µğŸ‡±</label>
            </td>
            <td class="participants__actions">
              <button class="participants__save" (click)="editKid(c)">ğŸ’¾ Salvar</button>
              <button class="participants__remove" (click)="removeKid(c.id)">âŒ</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <button class="participants__add" (click)="addKid()">â• Adicionar CrianÃ§a</button>

    <!-- ===== CRIANÃ‡AS MOBILE ===== -->
     <div class="participants__mobile-wrapper">
      <div class="participants__mobile" *ngFor="let p of filteredKids">
        <div class="participant-row" (click)="p.expanded = !p.expanded">
          <span class="participant-name">{{ p.nomeCompleto || 'Nome nÃ£o preenchido' }}</span>
          <button class="participants__remove" (click)="removeKid(p.id); $event.stopPropagation()">âŒ</button>
        </div>

        <div class="participant-body" *ngIf="p.expanded">
          <div class="participant-field"><label>Nome</label><input [(ngModel)]="p.nomeCompleto" /></div>
          <div class="participant-field"><label>Pai</label><input [(ngModel)]="p.nomePai" /></div>
          <div class="participant-field"><label>MÃ£e</label><input [(ngModel)]="p.nomeMae" /></div>
          <div class="participant-field"><label>Local de Nascimento</label><input [(ngModel)]="p.localNascimento" /></div>
          <div class="participant-field"><label>Data de Nascimento</label><input type="date" [(ngModel)]="p.dataNascimento" /></div>
          <div class="participant-field participant-bandeira">
            <label>Bandeira</label>
            <label><input type="radio" name="bandeira-{{p.id}}" [(ngModel)]="p.bandeira" value="ITALIA" /> ğŸ‡®ğŸ‡¹</label>
            <label><input type="radio" name="bandeira-{{p.id}}" [(ngModel)]="p.bandeira" value="POLONIA" /> ğŸ‡µğŸ‡±</label>
          </div>
          <button class="participants__save" (click)="editKid(p); p.expanded=false">ğŸ’¾ Salvar</button>
        </div>
      </div>
    </div>
    
  </div>
</section>
